---
title: 'PCA Data Reproducibility Workshop: Version Control'
author: "Benjamin Cole"
date: "2024-11-19"
output: 
  ioslides_presentation:
    widescreen: true
---

<style>
.forceBreak { -webkit-column-break-after: always; break-after: column; }
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


## Outline
In this workshop, we will:

- Explain why describing your data (metadata) is important
- Introduce version control and explain why it's important
- Introduce Git and Github
- Demonstrate using Git / Github

## A simple scenario
<div class="columns-2">
<font size="4">

Your group is funded to use single-cell methods to study osmotic stress in
plants (lucky you!)

Your sampling plan includes profiling:

- 2 replicates of root nuclei from control-treated plants
- 2 replicates of root nuclei sorbitol-treated plants

You grew your plants on agar plates, collected the tissue, and used the 10x Genomics
Multiome (GEX + ATAC-seq) single-cell kits to build your libraries.

You have now received the sequencing data from your core facility and are ready to start analysis. Yay!

<img src=../docs/seedling.png width="500"/>
</div>
</font>

## A simple scenario

But WAIT!

<img src=https://upload.wikimedia.org/wikipedia/commons/8/81/Stop_sign.png alt="drawing" width="100"/>

Have you recorded your metadata?

## What is metadata?
<font size="4">

Metadata is data used to describe other data.

- Growth conditions, experimental factors of your samples
- Particle type, dissociation details, sample QC
- Library preparation details (kit, version, read structure)
- Sequencing details (accession numbers, platform)
- Cell-level metadata (important for post-analysis)
- Code!

Several metadata schemas exist for single-cell

- COPO (singlecellschemas.org)
- Annotare

</font>

## OK can I analyze my data now?!
<font size="4">

Not so fast.

- What happens if metadata changes?

  * new samples
  * additional context you forgot to include
  * re-run of sequencing

Any change in metadata / data sources will impact resulting code. How can 
you keep track of it all?

</font>

## What is version control

<div class="columns-2">
<img src=https://git-scm.com/book/ms/v2/images/local.png alt="drawing" width="400"/>

- Tracking changes in code
- Tracking changes in data / metadata
- Sharing and managing those changes with others
- Reverting code when errors are introduced

</div>

## Your project needs version control

<div class="columns-2">
- You document all your benchwork in a lab notebook (right?). Code is the 
"Methods" section of your project for bioinformatics analysis. 
- Code can be overwritten, deleted, modified. This should be tracked so it can 
be
  - reused
  - shared
  - improved

![](https://imgs.xkcd.com/comics/documents.png)
</div>

## Version control with Git

<div class = "columns-2">
<font size="3">

 * Created by Linus Torvalds (of Linux fame) in 2005
 * Designed to track changes in a project and sync changes
 * Key terms:
     * Repository
     * Local
     * Remote
     * Branch
     * Commit
     * Clone
     * Push
     * Pull
     
</font>
<p class = "forceBreak"></p>
<img src=https://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Git_operations.svg/1920px-Git_operations.svg.png alt="drawing" width="400"/>
<font size="1">Credit: Wikipedia (https://en.wikipedia.org/wiki/Git)</font>
</div>

## Initiating a git repository
<font size="4">
There are two ways to initiate a Git repository:

  * On a remote server (e.g. GitHub)
  * Locally using `git init`
  
`.gitignore` file

  * Tells `git` not to track certain files that match various patterns
  * Useful when creating large numbers of data files that are not code
  
`git` creates an internal `.git` folder.

Other folders you might want to generate when creating your repository:

  * `src/` - for code files
  * `metadata/` - for storing machine- and human-readable files (I like *.csv)
  * `docs` - for documentation, reports, 
  * `data` - for data files generated by your code that you want hosted (or for internal use)

</font>

## GitHub

GitHub (https://www.github.com) is a large online database of git repositories

  * Can serve as a remote repository for your project
  * Is free to use for most people, but service is limited on the free tier
  * Includes features like issue tracking, releases, and others
  * Very useful for collaborating with other developers and the community
  
Other, similar tools include:

  * GitLab
  * BitBucket (Atlassian)
  
## Live Demonstration!

Having just generated a single-cell dataset, we'd like to start processing. To
start, lets document our samples, and track our changes using `git`.